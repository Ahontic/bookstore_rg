%main.container
  %h1.general-title-margin Checkout
  %ul.steps.list-inline
    - wizard_steps[1,5].each_with_index do |step, index|
      %li.step{ class: current_step?(step) ? 'active' : 'done'}
        = link_to wizard_path(step), class: 'step-link' do
          %span.step-number
            = index + 1 unless past_step?(step)
            - if past_step?(step)
              %i.fa.fa-check.step-icon
          %span.step-text.hidden-xs= step.capitalize
      - unless step == :complete
        %li.step-divider
    .hidden-xs.hidden-sm
      .row
        .col-md-5
          %h3.general-subtitle Billing Address
          = simple_form_for((@address if @address&.billing?) || current_customer.addresses.find_or_initialize_by(address_type: Address.address_types.keys.first), defaults: { input_html: { class: 'form-control' }, required: false }) do |f|
            .form-group
              = f.input :address_type, as: :hidden, autocomplete: "off", id: 'address_type', class: 'hidden', placeholder: "Address type"
            .form-group
              = f.input :first_name, autocomplete: "off", placeholder: "First name"
            .form-group
              = f.input :last_name, autocomplete: "off", placeholder: "Last name"
            .form-group
              = f.input :address, autocomplete: "off", placeholder: "Address"
            .form-group
              = f.input :city, autocomplete: "off", placeholder: "City"
            .form-group
              = f.input :zipcode, autocomplete: "off", placeholder: "Zipcode"
            .form-group
              = f.label :country, required: false
              %br/
              = f.country_select(:country, { priority_countries: ["UA", "US"], priority_countries_divider: "~~~~~~"}, {autocomplete: "off", id: 'сountry', class: 'form-control' })
            .form-group
              = f.input :phone, placeholder: "Example +355 66 123 4567"
            .text-center.general-text-align
              = f.submit "Save", class: 'btn btn-default.mb-10'
        .col-md-5.col-md-offset-1#hidden_fields
          %h3.general-subtitle Shipping Address
          = simple_form_for((@address if @address&.shipping?) || current_customer.addresses.find_or_initialize_by(address_type: 'shipping'), defaults: { input_html: { action: edit_address_path, class: 'form-control' }, required: false }) do |f|
            .form-group
              = f.input :address_type, as: :hidden, autocomplete: "off", id: 'address_type', class: 'hidden', placeholder: "Address type"
            .form-group
              = f.input :first_name, autocomplete: "off", placeholder: "First name"
            .form-group
              = f.input :last_name, autocomplete: "off", placeholder: "Last name"
            .form-group
              = f.input :address, autocomplete: "off", placeholder: "Address"
            .form-group
              = f.input :city, autocomplete: "off", placeholder: "City"
            .form-group
              = f.input :zipcode, autocomplete: "off", placeholder: "Zipcode"
            .form-group
              = f.label :country, required: false
              %br/
              = f.country_select(:country, { priority_countries: ["UA", "US"], priority_countries_divider: "~~~~~~"}, {autocomplete: "off", id: 'сountry', class: 'form-control' })
            .form-group
              = f.input :phone, placeholder: "Example +355 66 123 4567"
            .text-center.general-text-align
              = f.submit "Save", class: 'btn btn-default.mb-10'
      .form-group.checkbox
        %label.checkbox-label
          %input.checkbox-input{type: "checkbox", id: 'hide_address', hidden: "true"}
          %span.checkbox-icon
            %i.fa.fa-check
          %span.checkbox-text Use Billing Adress
    .general-text-align.mb-60
      %p.in-gold-500.font-18 Order Summary
      %table.general-summary-table
        %tr
          %td
            %p.font-16 Item Total:
          %td
            %p.font-16
              = number_to_currency(current_cart.sub_total, unit: '€')
        %tr
          %td
            %p.font-16 Coupon:
          %td
            %p.font-16
              = number_to_currency(current_cart.discount, unit: '€')
        %tr
          %td
            %p.font-16 Order Total:
          %td
            %p.font-16
              = number_to_currency(current_cart.order_total, unit: '€')
      %button.btn.btn-default.mb-20.hidden-xs.center-block
        = link_to "Save and Continue", checkout_path(:delivery), class: 'btn-default'
